<!doctype html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7" lang=""> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8" lang=""> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9" lang=""> <![endif]-->
<!--[if gt IE 8]><!-->
<html class="no-js" lang="en">
<!--<![endif]-->

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Sufee Admin - HTML5 Admin Template</title>
    <meta name="description" content="Sufee Admin - HTML5 Admin Template">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <link rel="shortcut icon" href="../public/images/devxpressFavicon.jpeg">
    
    <link rel="stylesheet" href="../public/dashboard_template/vendors/bootstrap/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="../public/dashboard_template/vendors/font-awesome/css/font-awesome.min.css">
    <link rel="stylesheet" href="../public/dashboard_template/vendors/themify-icons/css/themify-icons.css">
    <link rel="stylesheet" href="../public/dashboard_template/vendors/flag-icon-css/css/flag-icon.min.css">
    <link rel="stylesheet" href="../public/dashboard_template/vendors/selectFX/css/cs-skin-elastic.css">
    <link rel="stylesheet" href="../public/dashboard_template/vendors/jqvmap/dist/jqvmap.min.css">
    <link rel="stylesheet" href="../public/dashboard_template/vendors/datatables.net-bs4/css/dataTables.bootstrap4.min.css">
    <link rel="stylesheet" href="../public/dashboard_template/vendors/datatables.net-buttons-bs4/css/buttons.bootstrap4.min.css">

    <link rel="stylesheet" href="../public/dashboard_template/assets/css/style.css">

    <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,600,700,800' rel='stylesheet' type='text/css'>
</head>
<body>
    <aside id="left-panel" class="left-panel">
        <nav class="navbar navbar-expand-sm navbar-default">

            <div class="navbar-header">
                <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#main-menu" aria-controls="main-menu" aria-expanded="false" aria-label="Toggle navigation">
                    <i class="fa fa-bars"></i>
                </button>
                <a class="navbar-brand" href="index"><img src="../public/images/logoDevXpressNoBG.png" alt="Logo"></a>
                <a class="navbar-brand hidden" href="index"><img src="../public/images/logoDevXpressNoBG.png" alt="Logo"></a>
            </div>

            <div id="main-menu" class="main-menu collapse navbar-collapse">
                <ul class="nav navbar-nav">
                    <li class="nav-item">
                        <a  id="home-tab" data-toggle="tab" href="#home" role="tab" aria-controls="home" aria-selected="true"> <i class="menu-icon fa fa-dashboard"></i>Accueil </a>
                    </li>
                    <li class="nav-item">
                        <a  id="home-tab" data-toggle="tab" href="#traffic" role="tab" aria-controls="home" aria-selected="true"> <i class="menu-icon fa fa-group"></i>Traffique </a>
                    </li>
                    <li class="nav-item">
                        <a  id="home-tab" data-toggle="tab" href="#graph" role="tab" aria-controls="home" aria-selected="true"> <i class="menu-icon fa fa-bar-chart-o"></i>Graphique </a>
                    </li>
                    <li class="nav-item">
                        <a  id="home-tab" data-toggle="tab" href="#edit" role="tab" aria-controls="home" aria-selected="true"> <i class="menu-icon fa fa-edit"></i>Editeur </a>
                    </li>
                    <li class="nav-item">
                        <a  id="home-tab" data-toggle="tab" href="#adsens" role="tab" aria-controls="home" aria-selected="true"> <i class="menu-icon fa fa-money"></i>Addsense </a>
                    </li>
                </ul>
            </div><!-- /.navbar-collapse -->
            
        </nav>
    </aside><!-- /#left-panel -->

    <!-- Left Panel -->
    <!-- Right Panel -->
    <div id="right-panel" class="right-panel">

        <!-- Header-->
        <header id="header" class="header">
            <div class="header-menu">
                <div class="col-sm-7">
                    <a id="menuToggle" class="menutoggle pull-left"><i class="fa fa fa-tasks"></i></a>
                </div>
            </div>
        </header><!-- /header -->
        <!-- Header-->

        <div class="breadcrumbs">
            <div class="col-sm-4">
                <div class="page-header float-left">
                    <div class="page-title">
                        <h1>Website link</h1>
                    </div>
                </div>
            </div>
            <div class="col-sm-8">
                <div class="page-header float-right">
                    <div class="page-title">
                        <ol class="breadcrumb text-right">
                            <li>First Name Last Name</li>
                        </ol>
                    </div>
                </div>
            </div>
        </div>

        <div class="content mt-3">
            <!-- .content -->
            <div class="col-lg-6">
                <div class="card-body" style="min-width: fit-content;">
                    <div class="tab-content pl-3 p-1" id="myTabContent">
                        <div class="tab-pane fade show active" id="home" role="tabpanel" aria-labelledby="home-tab">
                            <h3>Home</h3>
                            <p>Some content here.</p>
                        </div>
                        <div class="tab-pane fade" id="traffic" role="tabpanel" aria-labelledby="profile-tab">
                            <div class="animated fadeIn">
                                <div class="row" style="overflow-x: auto;max-width: fit-content;">
                                    <div class="col-md-12">
                                        <div class="card">
                                            <div class="card-header">
                                                <strong class="card-title">Data Table</strong>
                                            </div>
                                            <div class="card-body">
                                                <table id="bootstrap-data-table-export" class="table table-striped table-bordered">
                                                    <thead>
                                                        <tr>
                                                            <th>Name</th>
                                                            <th>Phone</th>
                                                            <th>Email</th>
                                                            <th>Website</th>
                                                            <th>Datetime</th>
                                                            <th>Cmd</th>
                                                        </tr>
                                                    </thead>
                                                    <tbody>
                                                        <% for(var i=0; i < data.length; i++) { %>
                                                            <tr>
                                                              <td><%= data[i].name %></td>
                                                              <td><%= data[i].phone %></td>
                                                              <td><%= data[i].email %></td>
                                                              <td><%= data[i].website %></td>
                                                              <td><%= data[i].datetime %></td>
                                                              <td>
                                                                <button 
                                                                  style="background: none;color: inherit;border: none;padding: 0;font: inherit;cursor: pointer;outline: inherit;" 
                                                                  onclick="clicked('<%= data[i].id %>')"><i class="fa fa-trash-o" style="font-size: 1rem;color: black;"></i>
                                                                </button>
                                                              </td>
                                                            </tr>
                                                        <% } %>
                                                    </tbody>
                                                </table>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div><!-- .animated -->
                        </div>
                        <div class="tab-pane fade" id="graph" role="tabpanel" aria-labelledby="contact-tab">
                            <h3>Graph</h3>
                            <div class="card">
                                <div class="card-body">
                                    <h4 class="mb-3">Team Commits </h4>
                                    <canvas id="team-chart"></canvas>
                                </div>
                            </div>
                        </div>
                        <div class="tab-pane fade" id="edit" role="tabpanel" aria-labelledby="contact-tab">
                            <h3>Menu 3</h3>
                            <p>Some content here.</p>
                        </div>
                        <div class="tab-pane fade" id="adsens" role="tabpanel" aria-labelledby="contact-tab">
                            <h3>Menu 4</h3>
                            <p>Some content here.</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- Right Panel -->
    <script src="../public/dashboard_template/vendors/jquery/dist/jquery.min.js"></script>
    <script src="../public/dashboard_template/vendors/popper.js/dist/umd/popper.min.js"></script>
    <script src="../public/dashboard_template/vendors/bootstrap/dist/js/bootstrap.min.js"></script>
    <script src="../public/dashboard_template/assets/js/main.js"></script>


    <script src="../public/dashboard_template/vendors/chart.js/dist/Chart.bundle.min.js"></script>
    <script src="../public/dashboard_template/assets/js/dashboard.js"></script>
    <script src="../public/dashboard_template/assets/js/widgets.js"></script>
    <script src="../public/dashboard_template/vendors/jqvmap/dist/jquery.vmap.min.js"></script>
    <script src="../public/dashboard_template/vendors/jqvmap/examples/js/jquery.vmap.sampledata.js"></script>
    <script src="../public/dashboard_template/vendors/jqvmap/dist/maps/jquery.vmap.world.js"></script>
    <script src="../public/dashboard_template/vendors/datatables.net/js/jquery.dataTables.min.js"></script>
    <script src="../public/dashboard_template/vendors/datatables.net-bs4/js/dataTables.bootstrap4.min.js"></script>
    <script src="../public/dashboard_template/vendors/datatables.net-buttons/js/dataTables.buttons.min.js"></script>
    <script src="../public/dashboard_template/vendors/datatables.net-buttons-bs4/js/buttons.bootstrap4.min.js"></script>
    <script src="../public/dashboard_template/vendors/jszip/dist/jszip.min.js"></script>
    <script src="../public/dashboard_template/vendors/pdfmake/build/pdfmake.min.js"></script>
    <script src="../public/dashboard_template/vendors/pdfmake/build/vfs_fonts.js"></script>
    <script src="../public/dashboard_template/vendors/datatables.net-buttons/js/buttons.html5.min.js"></script>
    <script src="../public/dashboard_template/vendors/datatables.net-buttons/js/buttons.print.min.js"></script>
    <script src="../public/dashboard_template/vendors/datatables.net-buttons/js/buttons.colVis.min.js"></script>
    <script src="../public/dashboard_template/assets/js/init-scripts/data-table/datatables-init.js"></script>
    <script src="../public/dashboard_template/vendors/chart.js/dist/Chart.bundle.min.js"></script>
    <script>
        (function($) {
            "use strict";

            jQuery('#vmap').vectorMap({
                map: 'world_en',
                backgroundColor: null,
                color: '#ffffff',
                hoverOpacity: 0.7,
                selectedColor: '#1de9b6',
                enableZoom: true,
                showTooltip: true,
                values: sample_data,
                scaleColors: ['#1de9b6', '#03a9f5'],
                normalizeFunction: 'polynomial'
            });
            // data for graph
            function convertDateData(jsonArray) {
            var result = [];
            var date = "";
            var number = 0;
            for (var i = 0; i < jsonArray.length; i++) {
                var dateArray = jsonArray[i].date.split("/");
                var newDate = dateArray[2] + "-" + dateArray[0] + "-" + dateArray[1];
                if (newDate != date) {
                if (date != "") {
                    result.push({
                    date: date,
                    number: number
                    });
                }
                date = newDate;
                number = 1;
                } else {
                number++;
                }
            }
            result.push({
                date: date,
                number: number
            });
            return result;
            }
            var temp_array = <%- JSON.stringify(data) %>;
            var data_temp = [];
            temp_array.forEach(element => {
                data_temp.push({date : element.datetime.split(',')[0]});
            });
            var date_label = [];
            var date_visit = [];
            var data = convertDateData(data_temp);
            data.forEach(element => {
                date_label.push(element.date);
                date_visit.push(element.number);
            });
            console.log(date_label);
            console.log(date_visit);
            // Graph config
            var ctx = document.getElementById( "team-chart" );
            ctx.height = 150;
            var myChart = new Chart( ctx, {
                type: 'line',
                data: {
                    labels: date_label,
                    type: 'line',
                    defaultFontFamily: 'Montserrat',
                    datasets: [ {
                        data: date_visit,
                        label: "Expense",
                        backgroundColor: 'rgba(0,103,255,.15)',
                        borderColor: 'rgba(0,103,255,0.5)',
                        borderWidth: 3.5,
                        pointStyle: 'circle',
                        pointRadius: 5,
                        pointBorderColor: 'transparent',
                        pointBackgroundColor: 'rgba(0,103,255,0.5)',
                            }, ]
                },
                options: {
                    responsive: true,
                    tooltips: {
                        mode: 'index',
                        titleFontSize: 12,
                        titleFontColor: '#000',
                        bodyFontColor: '#000',
                        backgroundColor: '#fff',
                        titleFontFamily: 'Montserrat',
                        bodyFontFamily: 'Montserrat',
                        cornerRadius: 3,
                        intersect: false,
                    },
                    legend: {
                        display: false,
                        position: 'top',
                        labels: {
                            usePointStyle: true,
                            fontFamily: 'Montserrat',
                        },


                    },
                    scales: {
                        xAxes: [ {
                            display: true,
                            gridLines: {
                                display: false,
                                drawBorder: false
                            },
                            scaleLabel: {
                                display: false,
                                labelString: 'Date'
                            }
                                } ],
                        yAxes: [ {
                            display: true,
                            gridLines: {
                                display: false,
                                drawBorder: false
                            },
                            scaleLabel: {
                                display: true,
                                labelString: 'Visite'
                            }
                                } ]
                    },
                    title: {
                        display: false,
                    }
                }
            } );
        })(jQuery);

    </script>

</body>

</html>